[{"content":"LE BUT POURQUOI GITHUB ACTIONS ? Un besoin de monter une nouvelle CI pour remplacer Jenkins X v2, qui devenait très instable et déprécié, rapidement.\nMon entreprise à une souscription Github qui nous \u0026ldquo;offre\u0026rdquo; 50 000 minutes sur Actions, un petit POC s\u0026rsquo;est donc imposé.\nPOURQUOI FAIRE ? L\u0026rsquo;objectif était simple :\n Faire tourner lint + tu Construire l\u0026rsquo;image Docker La pousser sur un registry  2 heures plus tard, mon POC faisait le job !\nAlors bien sûr, c\u0026rsquo;était crade, les actions étaient prises un peu au hasard, mais mes besoins étaient remplis, je pouvais donc passer à la suite.\nC\u0026rsquo;EST TOUT ? Mais avant ça, pourquoi ne pas pousser le concept un peu plus loin, avec une CD ?\nMes besoins, dans les grandes lignes :\n Récupérer les infos du build Mettre à jour le chart Helm du service Déployer le chart sur un cluster Kubernetes Envoyer une notification Teams pour rendre compte de l\u0026rsquo;update  C\u0026rsquo;est à ce moment là que j\u0026rsquo;ai posé le stylo et que j\u0026rsquo;ai bouffé la documentation d\u0026rsquo;Actions.\nLA PRATIQUE HELLO-WORLD  en cours de rédaction\n ","date":"2022-04-01T00:00:00Z","image":"https://www.bencat.dev/p/cr%C3%A9er-une-ci/cd-compl%C3%A8te-avec-github-actions/cloud-background_hue4a1a79457676405d5bcede5ee777322_2022523_120x120_fill_box_smart1_3.png","permalink":"https://www.bencat.dev/p/cr%C3%A9er-une-ci/cd-compl%C3%A8te-avec-github-actions/","title":"Créer une CI/CD complète avec Github Actions"},{"content":"UN PEU D\u0026rsquo;HISTOIRE Dans des temps oubliés, le déploiement d\u0026rsquo;une application finissait irrémédiablement sur un serveur (physique ou virtuel). Lors du lancement de votre instance, l\u0026rsquo;OS créer un nouveau processus, et lui attribue un numéro de PID (Process IDentifier) unique afin de pouvoir identifier ce processus par la suite.\nLe premier processus lancé se voit attribuer le PID numéro 1, les prochains se retrouvent incrémentés.\nSous Linux, le PID 1 n\u0026rsquo;est autre que le processus \u0026ldquo;init\u0026rdquo;, qui sert à initialiser le système.\nTHE DOCKER WAY Lors du lancement d\u0026rsquo;un conteneur Docker, celui-ci utilise l\u0026rsquo;ENTRYPOINT ou la CMD finale de l\u0026rsquo;image, en tant que PID 1.\nPar exemple, si je créé un conteneur à partir d\u0026rsquo;un Dockerfile qui lance une application Node avec \u0026lsquo;CMD [\u0026ldquo;npm\u0026rdquo;, \u0026ldquo;start\u0026rdquo;]\u0026rsquo;, le PID 1 sera attribué à \u0026lsquo;npm\u0026rsquo;.\nCe qui pose quelques problèmes : La gestion des \u0026lsquo;child processes\u0026rsquo; n\u0026rsquo;est pas intégrée, des zombies peuvent apparaître (pour X raisons), les signaux envoyés par votre application (comme SIGTERM) ne seront plus interprétés\u0026hellip; bref, le conteneur devient bordélique, et il ne reste plus qu\u0026rsquo;à le reboot pour repartir sur une base saine, qui finira elle aussi par partir en vrille.\nTINI - A TINY BUT VALID INIT FOR CONTAINERS C\u0026rsquo;est là que Tini entre en jeu : il va s\u0026rsquo;occuper de votre PID 1 et faire tout ce qu\u0026rsquo;un init sait faire !\nFini les zombies, fini les signaux non reçu, bonjour les conteneurs sains !\nUTILISATION C\u0026rsquo;est aussi simple que d\u0026rsquo;ajouter ceci dans votre Dockerfile :\nENV TINI_VERSION v0.19.0ADD https://github.com/krallin/tini/releases/download/${TINI_VERSION}/tini /tiniRUN chmod +x /tiniENTRYPOINT [\u0026#34;/tini\u0026#34;, \u0026#34;--\u0026#34;]CMD [\u0026#34;npm\u0026#34;, \u0026#34;start\u0026#34;]et c\u0026rsquo;est tout ! Aucun autre changement n\u0026rsquo;est requis : si votre conteneur démarre correctement sans Tini, il en sera de même avec ;)\nVA CHERCHER BONHEUR Voici un lien vers le repo du projet : https://github.com/krallin/tini\nLe README est bien fourni, vous trouverez tous les détails dont vous avez besoin pour le mettre en place !\n","date":"2022-03-31T00:00:00Z","image":"https://www.bencat.dev/p/docker-gestion-du-pid-1-avec-tini/cloud-background_hue4a1a79457676405d5bcede5ee777322_2022523_120x120_fill_box_smart1_3.png","permalink":"https://www.bencat.dev/p/docker-gestion-du-pid-1-avec-tini/","title":"Docker: Gestion du PID 1 avec Tini"},{"content":"Enfin, un espace pour moi tout seul, où je vais pouvoir consigner mes pensées, mes idées, mes passions et mon savoir. Sûrement des bouts de ma vie, et du partage d\u0026rsquo;un peu de tout, la tech étant le point central.\nAVANT PROPOS Benoît, la trentaine bien entamée, passioné de nouvelles technologies, d\u0026rsquo;informatique en général et de geekeries en tout genre. Tu en veux un peu plus ? - ouais, on va se tutoyer, c\u0026rsquo;est plus sympa - Bon courage, sinon rendez-vous ici. (TODO : link to 2.0)\nAmour, gloire et PC Je suis un grand fan de SF, de musiques, de séries tv, de plantes, de chats, de sciences et d\u0026rsquo;astronomie, et même si je ne me résume pas à ça, ça couvre une bonne partie de ce qui me facine dans ce monde. J\u0026rsquo;ai grandi pendant la génération Club Do', AB 1 et le BigDil, IRC et en particulier EntreCh@t (Voila/Wanadoo), des LAN en cybercafé ou dans le garage d\u0026rsquo;un pote qui avait la place, CS, WOW, Pokémon\u0026hellip; et le Site du Zér0.\nFrom \u0026lt;head\u0026gt; to \u0026lt;/body\u0026gt; Le premier site que j\u0026rsquo;ai écris m\u0026rsquo;a permis de partager ma passion pour les mangas et animés, en HTML/CSS/Paint. J\u0026rsquo;ai pris plaisir à voir cette page web prendre forme pour finalement aboutir à une interface pas trop dégueu avec un contenu relativement riche. J\u0026rsquo;ai vite constaté les limites d\u0026rsquo;un site statique, je me suis donc naturellement dirigé vers PHP. Sisi, à l\u0026rsquo;époque, c\u0026rsquo;était naturel\u0026hellip; J\u0026rsquo;avais mis en place un CRUD tout simple avec une petite MySQL derrière, et un peu de JavaScript pour rendre le tout visuellement plus\u0026hellip; dynamique ?! Bref, une période de découverte riche en casse tête et en satisfaction, que j\u0026rsquo;ai malheureusement dû mettre de côté, suite à \u0026ldquo;les choses de la vie\u0026rdquo;, toussa toussa.\nHere we go tout court L\u0026rsquo;entrée dans la \u0026ldquo;vie active\u0026rdquo; a été comme une énorme claque pour moi, vraiment pas prêt, vraiment pas engagé, vraiment pas motivé, je me suis perdu sur des chemins pavés d\u0026rsquo;embûches, de rencontres, d\u0026rsquo;expériences enrichissantes, de constructions et d\u0026rsquo;appréhenssions de mes pensées, de partages et de remises en questions\u0026hellip; bonnes ou mauvaises, elles ont faits ce que je suis aujourd\u0026rsquo;hui.\nAprès la pluie\u0026hellip; J\u0026rsquo;ai fini par trouver un boulot à la FNAC, ce n\u0026rsquo;était pas idéal mais au moins je pouvais mettre à contribution le savoir accumulé depuis toutes ces années dans le domaine informatique, pour conseiller Mr et Mme tous le monde ou une entreprise dans la recherche de leurs besoins, me consolider sur les sujets que je pensais acquis, et appris bien plus que je ne l\u0026rsquo;espérait. Après plusieurs années dans le département informatique, j\u0026rsquo;ai eu l\u0026rsquo;opportunité de mettre en place le département téléphonie, secteur abandonné quelques années, puis réintroduit sous une autre forme : c\u0026rsquo;était l\u0026rsquo;avènement du smartphone et des forfaits sans engagement ! J\u0026rsquo;ai fait grandir et j\u0026rsquo;ai maintenu ce département durant 2 ans, avant de me décider à passer à autre chose.\n RETOUR AUX SOURCES Cette expérience FNAC m\u0026rsquo;a permis de renouer avec mes premières passions, vendre du matos pour finir par échanger avec les commerciaux des plus grandes marques sur les prochaines nouveautés a relancé mon envie de développer, il fallait que je repartes à zéro pour enfin faire de ma vie un terrain de jeu dans lequel je saurais me démarquer.\nRéinitialisation La reconversion professionnelle, ou comment faire un bon formatage afin de repartir sur un système sain et bien plus stable. Le FONGECIF est un organisme qui permet de suivre une formation certifiante afin de faciliter cette reconversion. Bingo. Les démarches ont été longues, surtout auprès de mon entreprise. Une fois le dossier accepté, tout s\u0026rsquo;est enchainé, et j\u0026rsquo;ai pu intégrer un parcours de Concepteur Developpeur Informatique, rien qu\u0026rsquo;ça ! 4 mois de cours intensif, 2 mois de stage pour valider les aquis.\nAu programme :\n Algo HTML/CSS JS SQL (MySQL) PHP POO puis Symfony Java J2E (focus sur servlet) Android  CrashLoopBackOff Remise en question\nOpenClassrooms  BRAVE NEW WORLD Sixense Digital  DEV-HOPS ! Faire un pont, pour de bon Le lien interservice\nCanal de Suez Chef d\u0026rsquo;orchestre  ","date":"0001-01-01T00:00:00Z","image":"https://www.bencat.dev/cloud-background.png%22","permalink":"https://www.bencat.dev/p/here-we-go-again/","title":"Here we go (again?) !\""}]